{"version":3,"sources":["webpack:///./src/pages/coralWork.vue?fcce","webpack:///./src/util/download.js","webpack:///src/pages/coralWork.vue","webpack:///./src/pages/coralWork.vue?cba1","webpack:///./src/pages/coralWork.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","on","click","delefile","_v","down","staticRenderFns","getBlob","url","Promise","resolve","xhr","XMLHttpRequest","open","responseType","onload","status","console","log","response","send","saveAs","blob","filename","callback","window","navigator","msSaveOrOpenBlob","msSaveBlob","link","document","createElement","body","querySelector","href","URL","createObjectURL","download","style","display","appendChild","removeChild","revokeObjectURL","then","coralWorkvue_type_script_lang_js_","name","components","Upload","upload","data","mounted","methods","api","objectName","res","notify","close","setTimeout","_this","$notify","title","message","type","pages_coralWorkvue_type_script_lang_js_","component","Object","componentNormalizer","__webpack_exports__"],"mappings":"uHAAA,IAAAA,EAAA,WAA0B,IAAAC,EAAAC,KAAaC,EAAAF,EAAAG,eAA0BC,EAAAJ,EAAAK,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAAA,EAAA,UAAAA,EAAA,OAAAA,EAAA,aAAwDE,GAAA,CAAIC,MAAAP,EAAAQ,WAAsB,CAAAR,EAAAS,GAAA,QAAAL,EAAA,aAAiCE,GAAA,CAAIC,MAAAP,EAAAU,OAAkB,CAAAV,EAAAS,GAAA,iBAClOE,EAAA,uCCIO,SAASC,EAAQC,GACtB,OAAO,IAAIC,QAAQ,SAAAC,GACjB,IAAMC,EAAM,IAAIC,eAChBD,EAAIE,KAAK,MAAOL,GAAK,GACrBG,EAAIG,aAAe,OACnBH,EAAII,OAAS,WACQ,MAAfJ,EAAIK,SACNC,QAAQC,IAAIP,EAAIQ,UAChBT,EAAQC,EAAIQ,YAGhBR,EAAIS,SASD,SAASC,EAAOC,EAAMC,EAAUC,GACrC,GAAIC,OAAOC,UAAUC,iBACnBD,UAAUE,WAAWN,EAAMC,OACtB,CACL,IAAMM,EAAOC,SAASC,cAAc,KAC9BC,EAAOF,SAASG,cAAc,QAEpCJ,EAAKK,KAAOT,OAAOU,IAAIC,gBAAgBd,GACvCO,EAAKQ,SAAWd,EAGhBM,EAAKS,MAAMC,QAAU,OACrBP,EAAKQ,YAAYX,GAEjBA,EAAK3B,QACL8B,EAAKS,YAAYZ,GAEjBJ,OAAOU,IAAIO,gBAAgBb,EAAKK,MAElCV,IAQK,SAASa,EAAS7B,EAAKe,EAAUC,GACtCjB,EAAQC,GAAKmC,KAAK,SAAArB,GAChBD,EAAOC,EAAMC,EAAUC,KCzB3B,IAAAoB,EAAA,CACAC,KAAA,YACAC,WAAA,CACAC,OAAAC,EAAA,MAEAC,KALA,WAMA,UAIAC,QAAA,aACAC,QAAA,CACAhD,SADA,WAEAiD,EAAA,KACA,CACAC,WAAA,mDAEA,gBACAV,KAAA,SAAAW,GACArC,QAAAC,IAAAoC,MAGAjD,KAXA,WAYAgC,EACA,iWACA,UACA,WACAkB,OAAAC,QAEAC,WAAA,WACAC,MAAAC,QAAA,CACAC,MAAA,KACAC,QAAA,SACAC,KAAA,aAEA,UChEmVC,EAAA,cCOnVC,EAAgBC,OAAAC,EAAA,KAAAD,CACdF,EACArE,EACAY,GACF,EACA,KACA,WACA,MAIe6D,EAAA,WAAAH","file":"js/chunk-2d0c897f.567ae590.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('Upload'),_c('div',[_c('el-button',{on:{\"click\":_vm.delefile}},[_vm._v(\"删除\")]),_c('el-button',{on:{\"click\":_vm.down}},[_vm._v(\"下载\")])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","/**\r\n * 获取 blob\r\n * @param  {String} url 目标文件地址\r\n * @return {Promise}\r\n */\r\nexport function getBlob(url) {\r\n  return new Promise(resolve => {\r\n    const xhr = new XMLHttpRequest()\r\n    xhr.open('GET', url, true)\r\n    xhr.responseType = 'blob'\r\n    xhr.onload = () => {\r\n      if (xhr.status === 200) {\r\n        console.log(xhr.response)\r\n        resolve(xhr.response)\r\n      }\r\n    }\r\n    xhr.send()\r\n  })\r\n}\r\n\r\n/**\r\n * 保存\r\n * @param  {Blob} blob\r\n * @param  {String} filename 想要保存的文件名称\r\n */\r\nexport function saveAs(blob, filename, callback) {\r\n  if (window.navigator.msSaveOrOpenBlob) {\r\n    navigator.msSaveBlob(blob, filename)\r\n  } else {\r\n    const link = document.createElement('a')\r\n    const body = document.querySelector('body')\r\n\r\n    link.href = window.URL.createObjectURL(blob)\r\n    link.download = filename\r\n\r\n    // fix Firefox\r\n    link.style.display = 'none'\r\n    body.appendChild(link)\r\n\r\n    link.click()\r\n    body.removeChild(link)\r\n\r\n    window.URL.revokeObjectURL(link.href)\r\n  }\r\n  callback()\r\n}\r\n\r\n/**\r\n * 下载\r\n * @param  {String} url 目标文件地址\r\n * @param  {String} filename 想要保存的文件名称\r\n */\r\nexport function download(url, filename, callback) {\r\n  getBlob(url).then(blob => {\r\n    saveAs(blob, filename, callback)\r\n  })\r\n}\r\n","<template>\r\n  <div>\r\n    <!-- <div style=\"width: 100%;\r\n    height: 100%;\r\n    justify-content: center;\r\n    display: flex;\">\r\n      <img style=\"max-width: 900px;\" src=\"../assets/images/welcome.png\" alt />\r\n    </div>\r\n    <div style=\"text-align: center;font-size: 3rem;font-weight: 300;\">\r\n      <div>WELCOME!</div>\r\n      <div style=\"font-size: 3rem;\">欢迎使用</div>\r\n    </div>-->\r\n    <Upload></Upload>\r\n\r\n    <div>\r\n      <el-button @click=\"delefile\">删除</el-button>\r\n      <el-button @click=\"down\">下载</el-button>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n\r\n\r\n<script>\r\nimport * as Api from \"../api/api\";\r\nimport * as DEFAULT from \"../json/default\";\r\nimport Upload from \"../components/upload.vue\";\r\nimport * as Download from \"../util/download\";\r\n\r\nexport default {\r\n  name: \"coralWork\",\r\n  components: {\r\n    Upload\r\n  },\r\n  data() {\r\n    return {};\r\n  },\r\n  //用的自定义组件\r\n\r\n  mounted: function() {},\r\n  methods: {\r\n    delefile() {\r\n      Api.delApi(\r\n        {\r\n          objectName: \"image//498a3551-b643-4960-9173-6874a7f46a40.jpg\"\r\n        },\r\n        \"/file/delete\"\r\n      ).then(res => {\r\n        console.log(res);\r\n      });\r\n    },\r\n    down() {\r\n      Download.download(\r\n        \"http://39.108.93.27:9000/coralcare/image/1cd3cc2f-25d9-4e21-b68d-214066e1b905.jpg?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=HC5BMSW1U7UDGDH5TQY4%2F20191027%2Fus-east-1%2Fs3%2Faws4_request&X-Amz-Date=20191027T075258Z&X-Amz-Expires=604800&X-Amz-SignedHeaders=host&X-Amz-Signature=9eeb958e929db1330667155d9df83caaec785649da969408edfdd82d4c0a21c8\",\r\n        \"123.jpg\",\r\n        () => {\r\n          notify.close();\r\n\r\n          setTimeout(function() {\r\n            _this.$notify({\r\n              title: \"下载\",\r\n              message: \"文件下载完成\",\r\n              type: \"success\"\r\n            });\r\n          }, 500);\r\n        }\r\n      );\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./coralWork.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./coralWork.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./coralWork.vue?vue&type=template&id=26aa9640&scoped=true&\"\nimport script from \"./coralWork.vue?vue&type=script&lang=js&\"\nexport * from \"./coralWork.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"26aa9640\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}